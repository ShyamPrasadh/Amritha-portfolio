---
---
<section id="dashboard" class="section">
  <div class="container">
    <div class="dashboard-header">
      <span class="tag">ðŸ“Š Data Insights</span>
      <h2 class="section-title">My Analytics</h2>
    </div>
    
    <div class="dashboard-grid">
      <!-- Stats Cards -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value" data-target="3">0</span>
            <span class="stat-label">Years Exp</span>
          </div>
          <div class="stat-graph">
            <svg viewBox="0 0 60 30" class="mini-graph">
              <polyline points="0,25 10,22 20,18 30,15 40,10 50,8 60,5" fill="none" stroke="url(#grad1)" stroke-width="2"/>
            </svg>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon purple">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value" data-target="15">0</span>
            <span class="stat-label">ML Models</span>
          </div>
          <div class="stat-graph">
            <svg viewBox="0 0 60 30" class="mini-graph purple">
              <polyline points="0,20 15,22 25,12 35,18 45,8 60,10" fill="none" stroke="url(#grad2)" stroke-width="2"/>
            </svg>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon teal">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
            </svg>
          </div>
          <div class="stat-content">
            <span class="stat-value" data-target="8">0</span>
            <span class="stat-label">Projects</span>
          </div>
          <div class="stat-graph">
            <svg viewBox="0 0 60 30" class="mini-graph teal">
              <polyline points="0,28 12,20 24,22 36,12 48,15 60,5" fill="none" stroke="url(#grad3)" stroke-width="2"/>
            </svg>
          </div>
        </div>
      </div>

      <!-- Main Charts -->
      <div class="charts-container">
        <!-- Skills Radial -->
        <div class="chart-panel">
          <div class="panel-header">
            <h3>Skills</h3>
            <span class="panel-badge">Core</span>
          </div>
          <div id="radial-chart"></div>
        </div>

        <!-- Activity Graph -->
        <div class="chart-panel wide">
          <div class="panel-header">
            <h3>Expertise Areas</h3>
            <div class="panel-tabs">
              <button class="tab active">Overview</button>
            </div>
          </div>
          <div id="area-chart"></div>
        </div>
      </div>

      <!-- Bottom Row -->
      <div class="tools-section">
        <div class="panel-header">
          <h3>Tech Stack</h3>
        </div>
        <div class="tools-grid">
          <div class="tool-item">
            <div class="tool-icon python">Py</div>
            <span>Python</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon sql">SQL</div>
            <span>SQL</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon r">R</div>
            <span>R Lang</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon powerbi">PBI</div>
            <span>Power BI</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon tableau">Tab</div>
            <span>Tableau</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon tensorflow">TF</div>
            <span>TensorFlow</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon aws">AWS</div>
            <span>AWS</span>
          </div>
          <div class="tool-item">
            <div class="tool-icon git">Git</div>
            <span>Git</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Background Graphics -->
  <div class="bg-graphics">
    <div class="circle-1"></div>
    <div class="circle-2"></div>
    <div class="grid-overlay"></div>
  </div>

  <!-- Aurora Gradient Definitions -->
  <svg width="0" height="0">
    <defs>
      <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#2dd4bf"/>
        <stop offset="100%" style="stop-color:#2dd4bf;stop-opacity:0.3"/>
      </linearGradient>
      <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#a855f7"/>
        <stop offset="100%" style="stop-color:#a855f7;stop-opacity:0.3"/>
      </linearGradient>
      <linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style="stop-color:#ec4899"/>
        <stop offset="100%" style="stop-color:#ec4899;stop-opacity:0.3"/>
      </linearGradient>
    </defs>
  </svg>
</section>

<script>
  import * as d3 from 'd3';

  // Counter Animation
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        document.querySelectorAll('.stat-value').forEach(el => {
          const target = parseInt(el.getAttribute('data-target') || '0');
          let current = 0;
          const timer = setInterval(() => {
            current += target / 30;
            if (current >= target) {
              current = target;
              clearInterval(timer);
            }
            el.textContent = Math.floor(current) + '+';
          }, 40);
        });
        observer.disconnect();
      }
    });
  }, { threshold: 0.3 });

  const statsRow = document.querySelector('.stats-row');
  if (statsRow) observer.observe(statsRow);

  // Radial Chart
  const radialContainer = document.getElementById('radial-chart');
  if (radialContainer) {
    const skills = [
      { name: 'Python', value: 92 },
      { name: 'SQL', value: 88 },
      { name: 'ML', value: 85 },
      { name: 'Viz', value: 82 },
      { name: 'Stats', value: 78 },
    ];

    const size = 240;
    const center = size / 2;
    const maxRadius = size / 2 - 30;

    const svg = d3.select('#radial-chart')
      .append('svg')
      .attr('viewBox', `0 0 ${size} ${size}`)
      .attr('width', '100%');

    // Background circles
    [0.25, 0.5, 0.75, 1].forEach(level => {
      svg.append('circle')
        .attr('cx', center)
        .attr('cy', center)
        .attr('r', maxRadius * level)
        .attr('fill', 'none')
        .attr('stroke', 'rgba(255,255,255,0.08)')
        .attr('stroke-dasharray', '4,4');
    });

    // Skill arcs
    const arcGenerator = d3.arc()
      .innerRadius(maxRadius * 0.4)
      .outerRadius((d: any) => maxRadius * 0.4 + (maxRadius * 0.55 * (d.value / 100)))
      .startAngle((d: any, i: number) => (i * 2 * Math.PI) / skills.length - Math.PI / 2)
      .endAngle((d: any, i: number) => ((i + 0.85) * 2 * Math.PI) / skills.length - Math.PI / 2)
      .cornerRadius(4);

    const colors = ['#2dd4bf', '#4ade80', '#a855f7', '#ec4899', '#38bdf8'];

    svg.selectAll('.skill-arc')
      .data(skills)
      .join('path')
      .attr('class', 'skill-arc')
      .attr('transform', `translate(${center}, ${center})`)
      .attr('fill', (d, i) => colors[i])
      .attr('opacity', 0.9)
      .attr('d', arcGenerator as any)
      .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.3))');

    // Labels
    skills.forEach((skill, i) => {
      const angle = (i * 2 * Math.PI) / skills.length - Math.PI / 2 + (0.85 * Math.PI) / skills.length;
      const labelRadius = maxRadius + 15;
      const x = center + labelRadius * Math.cos(angle);
      const y = center + labelRadius * Math.sin(angle);

      svg.append('text')
        .attr('x', x)
        .attr('y', y)
        .attr('text-anchor', 'middle')
        .attr('dominant-baseline', 'middle')
        .attr('fill', '#94a3b8')
        .attr('font-size', '11px')
        .attr('font-family', 'var(--font-body)')
        .text(skill.name);
    });

    // Center text
    svg.append('text')
      .attr('x', center)
      .attr('y', center - 8)
      .attr('text-anchor', 'middle')
      .attr('fill', '#f8fafc')
      .attr('font-size', '24px')
      .attr('font-weight', '700')
      .attr('font-family', 'var(--font-heading)')
      .text('85%');

    svg.append('text')
      .attr('x', center)
      .attr('y', center + 12)
      .attr('text-anchor', 'middle')
      .attr('fill', '#64748b')
      .attr('font-size', '11px')
      .text('AVG SCORE');
  }

  // Area Chart
  const areaContainer = document.getElementById('area-chart');
  if (areaContainer) {
    const data = [
      { x: 0, y1: 20, y2: 15, y3: 10 },
      { x: 1, y1: 35, y2: 25, y3: 18 },
      { x: 2, y1: 45, y2: 38, y3: 25 },
      { x: 3, y1: 55, y2: 48, y3: 35 },
      { x: 4, y1: 70, y2: 58, y3: 45 },
      { x: 5, y1: 85, y2: 72, y3: 55 },
    ];

    const margin = { top: 20, right: 20, bottom: 30, left: 40 };
    const width = 500 - margin.left - margin.right;
    const height = 200 - margin.top - margin.bottom;

    const svg = d3.select('#area-chart')
      .append('svg')
      .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
      .append('g')
      .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleLinear().domain([0, 5]).range([0, width]);
    const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);

    // Gradient fills
    const defs = svg.append('defs');
    
    const addGradient = (id: string, color: string) => {
      const grad = defs.append('linearGradient')
        .attr('id', id)
        .attr('x1', '0%').attr('y1', '0%')
        .attr('x2', '0%').attr('y2', '100%');
      grad.append('stop').attr('offset', '0%').attr('stop-color', color).attr('stop-opacity', 0.4);
      grad.append('stop').attr('offset', '100%').attr('stop-color', color).attr('stop-opacity', 0);
    };

    addGradient('areaGrad1', '#2dd4bf');
    addGradient('areaGrad2', '#a855f7');
    addGradient('areaGrad3', '#ec4899');

    const area = (key: string) => d3.area<typeof data[0]>()
      .x(d => x(d.x))
      .y0(height)
      .y1(d => y((d as any)[key]))
      .curve(d3.curveCatmullRom);

    const line = (key: string) => d3.line<typeof data[0]>()
      .x(d => x(d.x))
      .y(d => y((d as any)[key]))
      .curve(d3.curveCatmullRom);

    // Areas
    svg.append('path').datum(data).attr('fill', 'url(#areaGrad1)').attr('d', area('y1'));
    svg.append('path').datum(data).attr('fill', 'url(#areaGrad2)').attr('d', area('y2'));
    svg.append('path').datum(data).attr('fill', 'url(#areaGrad3)').attr('d', area('y3'));

    // Lines
    svg.append('path').datum(data).attr('fill', 'none').attr('stroke', '#2dd4bf').attr('stroke-width', 2).attr('d', line('y1'));
    svg.append('path').datum(data).attr('fill', 'none').attr('stroke', '#a855f7').attr('stroke-width', 2).attr('d', line('y2'));
    svg.append('path').datum(data).attr('fill', 'none').attr('stroke', '#ec4899').attr('stroke-width', 2).attr('d', line('y3'));

    // Grid lines
    svg.append('g')
      .attr('class', 'grid')
      .selectAll('line')
      .data([25, 50, 75])
      .join('line')
      .attr('x1', 0)
      .attr('x2', width)
      .attr('y1', d => y(d))
      .attr('y2', d => y(d))
      .attr('stroke', 'rgba(255,255,255,0.05)')
      .attr('stroke-dasharray', '4,4');

    // Legend
    const legend = svg.append('g').attr('transform', `translate(${width - 150}, 0)`);
    const legendItems = [
      { label: 'Analysis', color: '#2dd4bf' },
      { label: 'ML', color: '#a855f7' },
      { label: 'Viz', color: '#ec4899' },
    ];
    legendItems.forEach((item, i) => {
      legend.append('circle').attr('cx', i * 55).attr('cy', 0).attr('r', 4).attr('fill', item.color);
      legend.append('text').attr('x', i * 55 + 10).attr('y', 4).attr('fill', '#94a3b8').attr('font-size', '10px').text(item.label);
    });
  }
</script>

<style>
  #dashboard {
    position: relative;
    overflow: hidden;
  }

  .dashboard-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .tag {
    display: inline-block;
    padding: 0.5rem 1rem;
    background: rgba(45, 212, 191, 0.1);
    border: 1px solid rgba(45, 212, 191, 0.2);
    border-radius: 2rem;
    font-size: 0.875rem;
    color: var(--aurora-teal);
    margin-bottom: 1rem;
  }

  .dashboard-grid {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  /* Stats Row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  .stat-card {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem;
    background: rgba(17, 17, 24, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 1rem;
    transition: all 0.3s ease;
    min-width: 0;
  }

  .stat-card:hover {
    border-color: rgba(45, 212, 191, 0.3);
    transform: translateY(-2px);
  }

  .stat-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(45, 212, 191, 0.15);
    border-radius: 12px;
    color: #2dd4bf;
  }

  .stat-icon.purple { background: rgba(168, 85, 247, 0.15); color: #a855f7; }
  .stat-icon.teal { background: rgba(236, 72, 153, 0.15); color: #ec4899; }

  .stat-icon svg {
    width: 24px;
    height: 24px;
  }

  .stat-content {
    flex: 1;
  }

  .stat-value {
    display: block;
    font-size: 2rem;
    font-weight: 700;
    font-family: var(--font-heading);
    color: var(--heading-color);
    line-height: 1;
  }

  .stat-label {
    font-size: 0.875rem;
    color: #64748b;
    margin-top: 0.25rem;
  }

  .stat-graph {
    width: 60px;
    opacity: 0.7;
  }

  .mini-graph {
    stroke-linecap: round;
    stroke-linejoin: round;
  }

  /* Charts Container */
  .charts-container {
    display: grid;
    grid-template-columns: minmax(240px, 280px) 1fr;
    gap: 1.5rem;
  }

  @media (max-width: 768px) {
    .charts-container { 
      grid-template-columns: 1fr;
    }
    
    .chart-panel {
      max-width: 100%;
      overflow-x: auto;
    }
  }

  .chart-panel {
    background: rgba(17, 17, 24, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 1rem;
    padding: 1.25rem;
    min-width: 0;
  }

  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
  }

  .panel-header h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--heading-color);
  }

  .panel-badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.75rem;
    background: rgba(45, 212, 191, 0.15);
    color: #2dd4bf;
    border-radius: 1rem;
  }

  .panel-tabs {
    display: flex;
    gap: 0.5rem;
  }

  .tab {
    padding: 0.4rem 0.8rem;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 0.5rem;
    color: #64748b;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .tab.active {
    background: rgba(45, 212, 191, 0.15);
    border-color: rgba(45, 212, 191, 0.3);
    color: #2dd4bf;
  }

  #radial-chart, #area-chart {
    display: flex;
    justify-content: center;
  }

  /* Tools Section */
  .tools-section {
    background: rgba(17, 17, 24, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 1rem;
    padding: 1.25rem;
  }

  .tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 0.75rem;
  }

  .tool-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 0.5rem;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.05);
    border-radius: 0.75rem;
    transition: all 0.2s;
    cursor: default;
    text-align: center;
  }

  .tool-item:hover {
    border-color: rgba(45, 212, 191, 0.3);
    transform: translateY(-2px);
    background: rgba(45, 212, 191, 0.05);
  }

  .tool-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
    font-size: 0.875rem;
    font-weight: 700;
    font-family: var(--font-heading);
  }

  .tool-icon.python { background: linear-gradient(135deg, #3776ab, #ffd43b); color: #fff; }
  .tool-icon.sql { background: linear-gradient(135deg, #00758f, #f29111); color: #fff; }
  .tool-icon.r { background: linear-gradient(135deg, #276dc3, #75aadb); color: #fff; }
  .tool-icon.powerbi { background: linear-gradient(135deg, #f2c811, #e8a500); color: #000; }
  .tool-icon.tableau { background: linear-gradient(135deg, #e97627, #c72037); color: #fff; }
  .tool-icon.tensorflow { background: linear-gradient(135deg, #ff6f00, #ffa800); color: #fff; }
  .tool-icon.aws { background: linear-gradient(135deg, #232f3e, #ff9900); color: #fff; }
  .tool-icon.git { background: linear-gradient(135deg, #f14e32, #f34f29); color: #fff; }

  .tool-item span {
    font-size: 0.75rem;
    color: #94a3b8;
  }

  /* Background Graphics */
  .bg-graphics {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
    z-index: -1;
  }

  .circle-1 {
    position: absolute;
    width: 500px;
    height: 500px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(45, 212, 191, 0.12) 0%, transparent 70%);
    top: -200px;
    right: -100px;
  }

  .circle-2 {
    position: absolute;
    width: 400px;
    height: 400px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(168, 85, 247, 0.1) 0%, transparent 70%);
    bottom: -150px;
    left: -100px;
  }

  .grid-overlay {
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 60px 60px;
    mask-image: radial-gradient(ellipse at center, black 30%, transparent 70%);
  }
</style>
