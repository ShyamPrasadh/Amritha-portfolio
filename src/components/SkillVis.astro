---
---
<div id="skill-vis-container" class="glass"></div>

<script>
  import * as d3 from 'd3';

  const data = {
    nodes: [
      { id: "Data Science", group: 0, radius: 40 },
      
      { id: "Programming", group: 1, radius: 25 },
      { id: "Python", group: 1, radius: 15 },
      { id: "R", group: 1, radius: 15 },
      { id: "SQL", group: 1, radius: 15 },
      { id: "JavaScript", group: 1, radius: 15 },
      
      { id: "Machine Learning", group: 2, radius: 25 },
      { id: "Deep Learning", group: 2, radius: 18 },
      { id: "NLP", group: 2, radius: 18 },
      { id: "Scikit-Learn", group: 2, radius: 15 },
      { id: "TensorFlow", group: 2, radius: 15 },
      
      { id: "Tools", group: 3, radius: 25 },
      { id: "Tableau", group: 3, radius: 15 },
      { id: "PowerBI", group: 3, radius: 15 },
      { id: "Git", group: 3, radius: 12 },
      { id: "AWS", group: 3, radius: 15 },
      { id: "Excel", group: 3, radius: 12 },
    ],
    links: [
      { source: "Data Science", target: "Programming" },
      { source: "Data Science", target: "Machine Learning" },
      { source: "Data Science", target: "Tools" },
      
      { source: "Programming", target: "Python" },
      { source: "Programming", target: "R" },
      { source: "Programming", target: "SQL" },
      { source: "Programming", target: "JavaScript" },
      
      { source: "Machine Learning", target: "Deep Learning" },
      { source: "Machine Learning", target: "NLP" },
      { source: "Machine Learning", target: "Scikit-Learn" },
      { source: "Machine Learning", target: "TensorFlow" },
      
      { source: "Tools", target: "Tableau" },
      { source: "Tools", target: "PowerBI" },
      { source: "Tools", target: "Git" },
      { source: "Tools", target: "AWS" },
      { source: "Tools", target: "Excel" },
    ]
  };

  const container = document.getElementById("skill-vis-container");
  
  if (container) {
      const width = container.clientWidth || 800;
      const height = container.clientHeight || 600;
      
      // Clear previous SVG if any (for hot reloading)
      d3.select("#skill-vis-container").selectAll("*").remove();

      const svg = d3.select("#skill-vis-container")
        .append("svg")
        .attr("viewBox", [0, 0, width, height])
        .attr("width", "100%")
        .attr("height", "100%")
        .style("max-height", "600px");

      const color = d3.scaleOrdinal()
        .domain([0, 1, 2, 3])
        .range(["#ffffff", "#818cf8", "#c084fc", "#38bdf8"]); // White, Indigo, Purple, Sky

      const simulation = d3.forceSimulation(data.nodes)
        .force("link", d3.forceLink(data.links).id(d => d.id).distance(80))
        .force("charge", d3.forceManyBody().strength(-300))
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("collide", d3.forceCollide().radius(d => d.radius + 5));

      const link = svg.append("g")
        .attr("stroke", "#94a3b8") // Slate 400
        .attr("stroke-opacity", 0.3)
        .selectAll("line")
        .data(data.links)
        .join("line")
        .attr("stroke-width", 1.5);

      const node = svg.append("g")
        .attr("stroke", "#fff")
        .attr("stroke-width", 1.5)
        .selectAll("circle")
        .data(data.nodes)
        .join("circle")
        .attr("r", d => d.radius)
        .attr("fill", d => color(d.group))
        .attr("fill-opacity", 0.9)
        .call(drag(simulation));

      const label = svg.append("g")
        .attr("class", "labels")
        .selectAll("text")
        .data(data.nodes)
        .join("text")
        .attr("dy", d => d.radius + 20)
        .attr("text-anchor", "middle")
        .text(d => d.id)
        .style("fill", "#e2e8f0")
        .style("font-size", "14px")
        .style("font-family", "var(--font-heading)")
        .style("font-weight", "500")
        .style("pointer-events", "none")
        .style("text-shadow", "0 2px 4px rgba(0,0,0,0.5)");

      node.append("title")
        .text(d => d.id);

      simulation.on("tick", () => {
        link
          .attr("x1", d => d.source.x)
          .attr("y1", d => d.source.y)
          .attr("x2", d => d.target.x)
          .attr("y2", d => d.target.y);

        node
          .attr("cx", d => d.x)
          .attr("cy", d => d.y);
          
        label
          .attr("x", d => d.x)
          .attr("y", d => d.y);
      });

      function drag(simulation) {
        function dragstarted(event) {
          if (!event.active) simulation.alphaTarget(0.3).restart();
          event.subject.fx = event.subject.x;
          event.subject.fy = event.subject.y;
        }

        function dragged(event) {
          event.subject.fx = event.x;
          event.subject.fy = event.y;
        }

        function dragended(event) {
          if (!event.active) simulation.alphaTarget(0);
          event.subject.fx = null;
          event.subject.fy = null;
        }

        return d3.drag()
          .on("start", dragstarted)
          .on("drag", dragged)
          .on("end", dragended);
      }
  }
</script>

<style>
  #skill-vis-container {
    width: 100%;
    height: 600px;
    overflow: hidden;
    position: relative;
    background: radial-gradient(circle at center, rgba(11, 17, 33, 0.5) 0%, rgba(11, 17, 33, 0.9) 100%);
  }
  
  svg {
    filter: drop-shadow(0 0 10px rgba(0, 242, 255, 0.1));
  }
</style>
